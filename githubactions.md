# GitHub Actions å·¥ä½œæœºåˆ¶è¯¦è§£

> æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç» GitHub Actions å¦‚ä½•æ‰§è¡Œä»£ç ã€ä¿®æ”¹æ–‡ä»¶å¹¶å°†æ›´æ”¹æ¨é€å›ä»“åº“çš„å®Œæ•´æµç¨‹å’Œåº•å±‚æœºåˆ¶ã€‚

## ç›®å½•

1. [ä»€ä¹ˆæ˜¯ GitHub Actions](#ä»€ä¹ˆæ˜¯-github-actions)
2. [å·¥ä½œæµæ‰§è¡Œç¯å¢ƒ](#å·¥ä½œæµæ‰§è¡Œç¯å¢ƒ)
3. [è¯¦ç»†æ‰§è¡Œæµç¨‹](#è¯¦ç»†æ‰§è¡Œæµç¨‹)
4. [æƒé™å’Œè®¤è¯æœºåˆ¶](#æƒé™å’Œè®¤è¯æœºåˆ¶)
5. [æ–‡ä»¶æ“ä½œæµç¨‹å›¾](#æ–‡ä»¶æ“ä½œæµç¨‹å›¾)
6. [å¸¸è§é—®é¢˜å’Œæ³¨æ„äº‹é¡¹](#å¸¸è§é—®é¢˜å’Œæ³¨æ„äº‹é¡¹)

---

## ä»€ä¹ˆæ˜¯ GitHub Actions

GitHub Actions æ˜¯ GitHub æä¾›çš„ CI/CDï¼ˆæŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼‰æœåŠ¡ï¼Œå…è®¸ä½ åœ¨ä»£ç ä»“åº“ä¸­è‡ªåŠ¨åŒ–æ‰§è¡Œå„ç§ä»»åŠ¡ã€‚

### æ ¸å¿ƒæ¦‚å¿µ

- **Workflowï¼ˆå·¥ä½œæµï¼‰**ï¼šè‡ªåŠ¨åŒ–æµç¨‹çš„å®šä¹‰æ–‡ä»¶ï¼Œä½äº `.github/workflows/` ç›®å½•
- **Jobï¼ˆä½œä¸šï¼‰**ï¼šå·¥ä½œæµä¸­çš„ä¸€ä¸ªç‹¬ç«‹æ‰§è¡Œå•å…ƒ
- **Stepï¼ˆæ­¥éª¤ï¼‰**ï¼šä½œä¸šä¸­çš„å…·ä½“æ“ä½œ
- **Runnerï¼ˆè¿è¡Œå™¨ï¼‰**ï¼šæ‰§è¡Œä½œä¸šçš„è™šæ‹Ÿæœºç¯å¢ƒ
- **Actionï¼ˆåŠ¨ä½œï¼‰**ï¼šå¯é‡ç”¨çš„æ­¥éª¤ç»„ä»¶

---

## å·¥ä½œæµæ‰§è¡Œç¯å¢ƒ

### 1. Runnerï¼ˆè¿è¡Œå™¨ï¼‰æ¶æ„

å½“å·¥ä½œæµè¢«è§¦å‘æ—¶ï¼ŒGitHub ä¼šåˆ†é…ä¸€ä¸ªå…¨æ–°çš„è™šæ‹Ÿæœºï¼š

```yaml
jobs:
  update-prices:
    runs-on: ubuntu-latest  # â† æŒ‡å®šè¿è¡Œç¯å¢ƒ
```

**è¿è¡Œå™¨ç‰¹ç‚¹ï¼š**
- **å…¨æ–°ç¯å¢ƒ**ï¼šæ¯æ¬¡è¿è¡Œéƒ½æ˜¯ä¸€ä¸ªå¹²å‡€çš„è™šæ‹Ÿæœº
- **é¢„è£…è½¯ä»¶**ï¼šåŒ…å«å¸¸ç”¨å·¥å…·ï¼ˆgit, python, node, docker ç­‰ï¼‰
- **ä¸´æ—¶æ€§**ï¼šä»»åŠ¡å®Œæˆåè™šæ‹Ÿæœºä¼šè¢«é”€æ¯
- **éš”ç¦»æ€§**ï¼šä¸å…¶ä»–å·¥ä½œæµå®Œå…¨éš”ç¦»

**å¯ç”¨çš„è¿è¡Œå™¨ï¼š**
- `ubuntu-latest`ã€`ubuntu-22.04`ã€`ubuntu-20.04`
- `windows-latest`ã€`windows-2022`ã€`windows-2019`
- `macos-latest`ã€`macos-13`ã€`macos-12`

### 2. å·¥ä½œç›®å½•ç»“æ„

Actions è¿è¡Œæ—¶ä¼šåœ¨è™šæ‹Ÿæœºä¸Šåˆ›å»ºå¦‚ä¸‹ç›®å½•ç»“æ„ï¼š

```
/home/runner/work/
â””â”€â”€ github-actions-demo/          # ä»“åº“å
    â””â”€â”€ github-actions-demo/      # å·¥ä½œç›®å½•ï¼ˆ$GITHUB_WORKSPACEï¼‰
        â”œâ”€â”€ .github/
        â”œâ”€â”€ scripts/
        â”œâ”€â”€ data/
        â””â”€â”€ ... (ä½ çš„ä»“åº“å†…å®¹)
```

- **$GITHUB_WORKSPACE**ï¼šæŒ‡å‘ä½ çš„ä»“åº“æ ¹ç›®å½•
- æ‰€æœ‰æ–‡ä»¶æ“ä½œéƒ½åœ¨è¿™ä¸ªç›®å½•ä¸­è¿›è¡Œ

---

## è¯¦ç»†æ‰§è¡Œæµç¨‹

### é˜¶æ®µ 1: è§¦å‘å·¥ä½œæµ

```yaml
on:
  push:                      # æ¨é€ä»£ç æ—¶è§¦å‘
    branches: ['**']
  workflow_dispatch:         # æ‰‹åŠ¨è§¦å‘
  schedule:                  # å®šæ—¶è§¦å‘
    - cron: '*/30 * * * *'   # æ¯30åˆ†é’Ÿ
```

**è§¦å‘æœºåˆ¶ï¼š**
1. **push äº‹ä»¶**ï¼šå½“ä½ æ¨é€ä»£ç åˆ°æŒ‡å®šåˆ†æ”¯æ—¶
2. **workflow_dispatch**ï¼šåœ¨ GitHub ç½‘é¡µä¸Šæ‰‹åŠ¨ç‚¹å‡» "Run workflow"
3. **schedule äº‹ä»¶**ï¼šæŒ‰ç…§ cron è¡¨è¾¾å¼å®šæ—¶æ‰§è¡Œ

### é˜¶æ®µ 2: åˆ†é…è¿è¡Œå™¨

```
GitHub æœåŠ¡å™¨æ”¶åˆ°è§¦å‘ä¿¡å·
    â†“
åœ¨äº‘ç«¯åˆ›å»ºå…¨æ–°çš„ Ubuntu è™šæ‹Ÿæœº
    â†“
è™šæ‹Ÿæœºå¯åŠ¨ï¼Œé¢„è£…ç¯å¢ƒå‡†å¤‡å°±ç»ª
    â†“
å¼€å§‹æ‰§è¡Œ Job
```

### é˜¶æ®µ 3: æ£€å‡ºä»£ç ï¼ˆCheckoutï¼‰

```yaml
- name: Checkout
  uses: actions/checkout@v4
  with:
    fetch-depth: 0
```

**è¿™ä¸€æ­¥åšäº†ä»€ä¹ˆï¼š**

```bash
# åœ¨è™šæ‹Ÿæœºä¸Šæ‰§è¡Œï¼ˆç®€åŒ–ç‰ˆï¼‰
cd $GITHUB_WORKSPACE
git clone --depth 0 https://github.com/ä½ çš„ç”¨æˆ·å/github-actions-demo.git .
git checkout master  # æˆ–è§¦å‘çš„åˆ†æ”¯
```

**å…³é”®å‚æ•°ï¼š**
- `fetch-depth: 0`ï¼šè·å–å®Œæ•´çš„ Git å†å²ï¼ˆé»˜è®¤åªè·å–æœ€æ–°æäº¤ï¼‰
- å¦‚æœè¦æ¨é€ä»£ç å›ä»“åº“ï¼Œ**å¿…é¡»è·å–å®Œæ•´å†å²**

**æ£€å‡ºåçš„çŠ¶æ€ï¼š**
```
/home/runner/work/github-actions-demo/github-actions-demo/
â”œâ”€â”€ .git/                    â† å®Œæ•´çš„ Git ä»“åº“
â”œâ”€â”€ .github/workflows/
â”œâ”€â”€ scripts/
â”œâ”€â”€ data/
â””â”€â”€ README.md
```

### é˜¶æ®µ 4: è®¾ç½® Python ç¯å¢ƒ

```yaml
- name: Setup Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.x'
```

**è¿™ä¸€æ­¥åšäº†ä»€ä¹ˆï¼š**
- å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Pythonï¼ˆè¿™é‡Œæ˜¯æœ€æ–°çš„ 3.xï¼‰
- é…ç½® `pip` åŒ…ç®¡ç†å™¨
- å°† Python æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡

### é˜¶æ®µ 5: å®‰è£…ä¾èµ–

```yaml
- name: Install dependencies
  run: |
    python -V
    pip install requests beautifulsoup4
```

**æ‰§è¡Œè¿‡ç¨‹ï¼š**
```bash
# åœ¨è™šæ‹Ÿæœºä¸Šå®é™…æ‰§è¡Œçš„å‘½ä»¤
cd $GITHUB_WORKSPACE
python -V  # è¾“å‡ºï¼šPython 3.11.x
pip install requests beautifulsoup4
```

**åŒ…å®‰è£…ä½ç½®ï¼š**
- å®‰è£…åœ¨è™šæ‹Ÿæœºçš„ Python ç¯å¢ƒä¸­
- è·¯å¾„ç±»ä¼¼ï¼š`/opt/hostedtoolcache/Python/3.11.x/x64/lib/python3.11/site-packages/`

### é˜¶æ®µ 6: æ‰§è¡Œè„šæœ¬ç”Ÿæˆæ–‡ä»¶

#### 6.1 è·å–ä»·æ ¼æ•°æ®

```yaml
- name: Fetch gold and egg prices
  run: |
    python scripts/gold_egg_price.py
```

**æ‰§è¡Œè¿‡ç¨‹ï¼š**
```bash
cd $GITHUB_WORKSPACE
python scripts/gold_egg_price.py

# è¿™ä¸ªè„šæœ¬ä¼šï¼š
# 1. ä»ç½‘ä¸ŠæŠ“å–é»„é‡‘å’Œé¸¡è›‹ä»·æ ¼
# 2. åœ¨ data/ ç›®å½•åˆ›å»ºæˆ–æ›´æ–° price_history.json
```

**æ–‡ä»¶ç³»ç»Ÿå˜åŒ–ï¼š**
```diff
/home/runner/work/github-actions-demo/github-actions-demo/
  data/
-   price_history.json  (æ—§å†…å®¹)
+   price_history.json  (æ–°å†…å®¹ - æ·»åŠ äº†ä»Šå¤©çš„æ•°æ®)
```

#### 6.2 ç”Ÿæˆ HTML æŠ¥å‘Š

```yaml
- name: Generate HTML report
  run: |
    python scripts/generate_html.py
```

**æ‰§è¡Œè¿‡ç¨‹ï¼š**
```bash
python scripts/generate_html.py

# è¿™ä¸ªè„šæœ¬ä¼šï¼š
# 1. è¯»å– data/price_history.json
# 2. ç”Ÿæˆæˆ–æ›´æ–° index.html
```

**æ–‡ä»¶ç³»ç»Ÿå˜åŒ–ï¼š**
```diff
/home/runner/work/github-actions-demo/github-actions-demo/
+ index.html  (æ–°ç”Ÿæˆçš„ HTML æ–‡ä»¶)
```

### é˜¶æ®µ 7: æäº¤å¹¶æ¨é€æ›´æ”¹ï¼ˆæ ¸å¿ƒæœºåˆ¶ï¼‰

è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼Œè®©æˆ‘ä»¬è¯¦ç»†å‰–æï¼š

```yaml
- name: Commit and push data
  run: |
    git config --local user.email "github-actions[bot]@users.noreply.github.com"
    git config --local user.name "github-actions[bot]"
    git add data/price_history.json index.html
    git diff --staged --quiet || git commit -m "ğŸ¤– è‡ªåŠ¨æ›´æ–°ä»·æ ¼æ•°æ® $(date +'%Y-%m-%d %H:%M')"
    git push
```

#### 7.1 é…ç½® Git ç”¨æˆ·ä¿¡æ¯

```bash
git config --local user.email "github-actions[bot]@users.noreply.github.com"
git config --local user.name "github-actions[bot]"
```

**ä½œç”¨ï¼š**
- è®¾ç½®æäº¤è€…èº«ä»½ï¼ˆå¿…é¡»ï¼Œå¦åˆ™ git commit ä¼šå¤±è´¥ï¼‰
- `--local`ï¼šä»…åœ¨å½“å‰ä»“åº“ç”Ÿæ•ˆ
- ä½¿ç”¨ `github-actions[bot]` ä½œä¸ºæäº¤è€…åç§°ï¼ˆGitHub å®˜æ–¹æœºå™¨äººè´¦å·ï¼‰

#### 7.2 æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº

```bash
git add data/price_history.json index.html
```

**Git å†…éƒ¨æ“ä½œï¼š**
```bash
# Git æ£€æµ‹æ–‡ä»¶å˜åŒ–
$ git status
On branch master
Changes not staged for commit:
  modified:   data/price_history.json

Untracked files:
  index.html

# æ·»åŠ åˆ°æš‚å­˜åŒº
$ git add data/price_history.json index.html

# æš‚å­˜åŒºçŠ¶æ€
$ git status
On branch master
Changes to be committed:
  modified:   data/price_history.json
  new file:   index.html
```

#### 7.3 æ¡ä»¶æäº¤

```bash
git diff --staged --quiet || git commit -m "ğŸ¤– è‡ªåŠ¨æ›´æ–°ä»·æ ¼æ•°æ® $(date +'%Y-%m-%d %H:%M')"
```

**é€»è¾‘è§£æï¼š**

```bash
# æ‹†è§£å‘½ä»¤
git diff --staged --quiet  # æ£€æŸ¥æš‚å­˜åŒºæ˜¯å¦æœ‰å˜åŒ–
||                         # å¦‚æœå‰é¢å‘½ä»¤å¤±è´¥ï¼ˆæœ‰å˜åŒ–ï¼‰åˆ™æ‰§è¡Œåé¢çš„
git commit -m "..."        # åˆ›å»ºæäº¤
```

**è¯¦ç»†è¿‡ç¨‹ï¼š**

1. `git diff --staged --quiet`ï¼š
   - æ£€æŸ¥æš‚å­˜åŒºæ˜¯å¦æœ‰å˜åŒ–
   - `--quiet`ï¼šä¸è¾“å‡ºå·®å¼‚ï¼Œåªè¿”å›é€€å‡ºç 
   - **è¿”å› 0**ï¼šæ— å˜åŒ–ï¼ˆæäº¤å‘½ä»¤ä¸æ‰§è¡Œï¼‰
   - **è¿”å› 1**ï¼šæœ‰å˜åŒ–ï¼ˆæ‰§è¡Œæäº¤å‘½ä»¤ï¼‰

2. `$(date +'%Y-%m-%d %H:%M')`ï¼š
   - Shell å‘½ä»¤æ›¿æ¢
   - åœ¨è™šæ‹Ÿæœºä¸Šæ‰§è¡Œ `date` å‘½ä»¤
   - è¾“å‡ºç±»ä¼¼ï¼š`2025-10-24 15:30`

3. `git commit`ï¼š
   - åˆ›å»ºæ–°çš„æäº¤å¯¹è±¡
   - æäº¤ä¿¡æ¯ï¼š`ğŸ¤– è‡ªåŠ¨æ›´æ–°ä»·æ ¼æ•°æ® 2025-10-24 15:30`

**Git å†…éƒ¨ï¼š**
```bash
# åˆ›å»ºæäº¤å¯¹è±¡
$ git commit -m "ğŸ¤– è‡ªåŠ¨æ›´æ–°ä»·æ ¼æ•°æ® 2025-10-24 15:30"
[master abc1234] ğŸ¤– è‡ªåŠ¨æ›´æ–°ä»·æ ¼æ•°æ® 2025-10-24 15:30
 2 files changed, 150 insertions(+), 10 deletions(-)
 create mode 100644 index.html
```

#### 7.4 æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆæ ¸å¿ƒè®¤è¯æœºåˆ¶ï¼‰

```bash
git push
```

è¿™ä¸€æ­¥æ˜¯å¦‚ä½•å°†ä»£ç æ¨é€å› GitHub çš„ï¼Ÿè¿™æ¶‰åŠåˆ° GitHub Actions çš„**è‡ªåŠ¨è®¤è¯æœºåˆ¶**ã€‚

---

## æƒé™å’Œè®¤è¯æœºåˆ¶

### 1. GITHUB_TOKEN è‡ªåŠ¨è®¤è¯

GitHub Actions æä¾›äº†ä¸€ä¸ª**è‡ªåŠ¨ç”Ÿæˆçš„ä¸´æ—¶ä»¤ç‰Œ**ï¼š`GITHUB_TOKEN`

**å·¥ä½œåŸç†ï¼š**

```yaml
permissions:
  contents: write  # â† å£°æ˜éœ€è¦å†™æƒé™
```

å½“ä½ å£°æ˜ `contents: write` æƒé™åï¼š

1. **GitHub è‡ªåŠ¨ç”Ÿæˆä¸´æ—¶ä»¤ç‰Œ**ï¼š
   - ä»¤ç‰Œåç§°ï¼š`GITHUB_TOKEN`
   - æƒé™èŒƒå›´ï¼šæ ¹æ® `permissions` é…ç½®
   - æœ‰æ•ˆæœŸï¼šä»…å½“å‰å·¥ä½œæµè¿è¡ŒæœŸé—´ï¼ˆé€šå¸¸å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ï¼‰
   - è‡ªåŠ¨æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡

2. **Git æ“ä½œè‡ªåŠ¨ä½¿ç”¨ä»¤ç‰Œ**ï¼š
   - `actions/checkout@v4` ä¼šè‡ªåŠ¨é…ç½® Git ä½¿ç”¨è¿™ä¸ªä»¤ç‰Œ
   - ä¸éœ€è¦æ‰‹åŠ¨é…ç½®è®¤è¯ä¿¡æ¯

**ç­‰æ•ˆçš„åº•å±‚æ“ä½œï¼š**

```bash
# actions/checkout å®é™…ä¸Šåšäº†è¿™äº›ï¼ˆç®€åŒ–ç‰ˆï¼‰
git clone https://x-access-token:${GITHUB_TOKEN}@github.com/ä½ çš„ç”¨æˆ·å/github-actions-demo.git

# git push æ—¶è‡ªåŠ¨ä½¿ç”¨ä»¤ç‰Œ
git push https://x-access-token:${GITHUB_TOKEN}@github.com/ä½ çš„ç”¨æˆ·å/github-actions-demo.git master
```

### 2. æƒé™çº§åˆ«è¯´æ˜

```yaml
permissions:
  contents: write      # å…è®¸ä¿®æ”¹ä»“åº“å†…å®¹ï¼ˆæ¨é€ã€åˆ›å»º/åˆ é™¤åˆ†æ”¯ç­‰ï¼‰
  # contents: read    # åªè¯»æƒé™ï¼ˆé»˜è®¤ï¼‰
  # issues: write     # å…è®¸æ“ä½œ Issues
  # pull-requests: write  # å…è®¸æ“ä½œ Pull Requests
```

**ä¸ºä»€ä¹ˆéœ€è¦æ˜¾å¼å£°æ˜ `contents: write`ï¼Ÿ**
- GitHub Actions é»˜è®¤æƒé™æ˜¯**åªè¯»**ï¼ˆ`contents: read`ï¼‰
- å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œéœ€è¦å†™æƒé™å¿…é¡»æ˜¾å¼å£°æ˜
- é˜²æ­¢æ¶æ„ä»£ç æ„å¤–ä¿®æ”¹ä»“åº“

### 3. è®¤è¯æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions å¼€å§‹è¿è¡Œ             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯»å– workflow ä¸­çš„ permissions é…ç½® â”‚
â”‚  permissions:                        â”‚
â”‚    contents: write                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub ç”Ÿæˆä¸´æ—¶ GITHUB_TOKEN        â”‚
â”‚  - æƒé™ï¼šwrite åˆ°å½“å‰ä»“åº“            â”‚
â”‚  - æœ‰æ•ˆæœŸï¼šä»…å½“å‰å·¥ä½œæµè¿è¡ŒæœŸé—´      â”‚
â”‚  - èŒƒå›´ï¼šä»…é™å½“å‰ä»“åº“                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å°† GITHUB_TOKEN æ³¨å…¥ç¯å¢ƒå˜é‡        â”‚
â”‚  export GITHUB_TOKEN=ghs_xxxxx...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  actions/checkout@v4 é…ç½® Git        â”‚
â”‚  git config credential.helper        â”‚
â”‚  "store --file=.git/credentials"     â”‚
â”‚                                      â”‚
â”‚  å†™å…¥ .git/credentials:              â”‚
â”‚  https://x-access-token:ghs_xxx@...  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰§è¡Œ git push                       â”‚
â”‚  Git è‡ªåŠ¨è¯»å– .git/credentials       â”‚
â”‚  ä½¿ç”¨ GITHUB_TOKEN è¿›è¡Œè®¤è¯          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub éªŒè¯ Token                   â”‚
â”‚  - æ£€æŸ¥æƒé™ï¼ˆcontents: writeï¼‰       â”‚
â”‚  - æ£€æŸ¥æœ‰æ•ˆæœŸ                        â”‚
â”‚  - æ£€æŸ¥ä»“åº“èŒƒå›´                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨é€æˆåŠŸï¼                          â”‚
â”‚  - åˆ›å»ºæ–°æäº¤                        â”‚
â”‚  - æ›´æ–° master åˆ†æ”¯                  â”‚
â”‚  - è§¦å‘ push äº‹ä»¶ï¼ˆå¯èƒ½è§¦å‘å…¶ä»–å·¥ä½œæµï¼‰â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. å®‰å…¨æœºåˆ¶

**GITHUB_TOKEN çš„é™åˆ¶ï¼š**
1. **ä»…å½“å‰ä»“åº“**ï¼šä¸èƒ½è®¿é—®å…¶ä»–ä»“åº“
2. **ä¸´æ—¶æœ‰æ•ˆ**ï¼šå·¥ä½œæµç»“æŸåç«‹å³å¤±æ•ˆ
3. **æƒé™å—é™**ï¼šåªèƒ½æ‰§è¡Œ `permissions` ä¸­å£°æ˜çš„æ“ä½œ
4. **ä¸ä¼šè§¦å‘å¾ªç¯**ï¼šä½¿ç”¨ GITHUB_TOKEN æ¨é€çš„ä»£ç ä¸ä¼šè§¦å‘ `push` äº‹ä»¶ï¼ˆé˜²æ­¢æ— é™å¾ªç¯ï¼‰

**ä¸ºä»€ä¹ˆå®‰å…¨ï¼Ÿ**
```yaml
# âŒ ä¸ä¼šå¯¼è‡´æ— é™å¾ªç¯
on:
  push:  # GITHUB_TOKEN çš„æ¨é€ä¸ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶

# âœ… å¦‚æœéœ€è¦è§¦å‘åç»­å·¥ä½œæµï¼Œä½¿ç”¨ Personal Access Token (PAT)
```

---

## æ–‡ä»¶æ“ä½œæµç¨‹å›¾

### å®Œæ•´çš„æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è§¦å‘äº‹ä»¶                                                         â”‚
â”‚  - push åˆ°ä»“åº“                                                   â”‚
â”‚  - æ‰‹åŠ¨è§¦å‘ (workflow_dispatch)                                  â”‚
â”‚  - å®šæ—¶è§¦å‘ (schedule: */30 * * * *)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub äº‘ç«¯ï¼šåˆ›å»ºå…¨æ–° Ubuntu è™šæ‹Ÿæœº                              â”‚
â”‚  /home/runner/work/github-actions-demo/github-actions-demo/      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 1: Checkout ä»£ç                                             â”‚
â”‚  $ git clone --depth 0 <ä»“åº“URL> .                               â”‚
â”‚                                                                   â”‚
â”‚  è™šæ‹Ÿæœºæ–‡ä»¶ç³»ç»Ÿ:                                                  â”‚
â”‚  â”œâ”€â”€ .git/              (å®Œæ•´ Git å†å²)                          â”‚
â”‚  â”œâ”€â”€ .github/workflows/                                          â”‚
â”‚  â”œâ”€â”€ scripts/                                                    â”‚
â”‚  â”‚   â”œâ”€â”€ gold_egg_price.py                                       â”‚
â”‚  â”‚   â””â”€â”€ generate_html.py                                        â”‚
â”‚  â”œâ”€â”€ data/                                                       â”‚
â”‚  â”‚   â””â”€â”€ price_history.json  (æ—§æ•°æ®)                            â”‚
â”‚  â””â”€â”€ README.md                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: å®‰è£… Python å’Œä¾èµ–                                       â”‚
â”‚  $ pip install requests beautifulsoup4                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 3: æ‰§è¡Œè„šæœ¬ - è·å–ä»·æ ¼æ•°æ®                                  â”‚
â”‚  $ python scripts/gold_egg_price.py                              â”‚
â”‚                                                                   â”‚
â”‚  è„šæœ¬æ‰§è¡Œæµç¨‹:                                                    â”‚
â”‚  1. å‘é€ HTTP è¯·æ±‚åˆ°ä¸Šæµ·é»„é‡‘äº¤æ˜“æ‰€                                â”‚
â”‚     GET https://www.sge.com.cn/sjzx/quotation_daily_new?...      â”‚
â”‚                                                                   â”‚
â”‚  2. è§£æ HTMLï¼Œæå–é»„é‡‘ä»·æ ¼                                       â”‚
â”‚     é‡‘ä»·: 941.21 å…ƒ/å…‹                                            â”‚
â”‚                                                                   â”‚
â”‚  3. å‘é€ HTTP è¯·æ±‚åˆ°é¸¡è›‹äº§ä¸šç½‘                                    â”‚
â”‚     GET https://egg.100ppi.com/kx/                               â”‚
â”‚                                                                   â”‚
â”‚  4. è§£æé¡µé¢ï¼Œæå–é¸¡è›‹ä»·æ ¼                                        â”‚
â”‚     è›‹ä»·: 3.04 å…ƒ/æ–¤                                              â”‚
â”‚                                                                   â”‚
â”‚  5. è®¡ç®—æ¯”ä¾‹å¹¶ä¿å­˜æ•°æ®                                            â”‚
â”‚     æ¯”ä¾‹: 310.1                                                  â”‚
â”‚                                                                   â”‚
â”‚  6. å†™å…¥æ–‡ä»¶ (Python æ–‡ä»¶æ“ä½œ)                                    â”‚
â”‚     with open('data/price_history.json', 'w') as f:              â”‚
â”‚         json.dump(history, f)                                    â”‚
â”‚                                                                   â”‚
â”‚  æ–‡ä»¶ç³»ç»Ÿå˜åŒ–:                                                    â”‚
â”‚  data/price_history.json  â† æ›´æ–°å†…å®¹                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: æ‰§è¡Œè„šæœ¬ - ç”Ÿæˆ HTML                                     â”‚
â”‚  $ python scripts/generate_html.py                               â”‚
â”‚                                                                   â”‚
â”‚  è„šæœ¬æ‰§è¡Œæµç¨‹:                                                    â”‚
â”‚  1. è¯»å– data/price_history.json                                 â”‚
â”‚     with open('data/price_history.json', 'r') as f:              â”‚
â”‚         history = json.load(f)                                   â”‚
â”‚                                                                   â”‚
â”‚  2. å¤„ç†æ•°æ®ï¼ˆå‡†å¤‡å›¾è¡¨æ•°æ®ï¼‰                                      â”‚
â”‚     dates = [...]                                                â”‚
â”‚     prices = [...]                                               â”‚
â”‚                                                                   â”‚
â”‚  3. ç”Ÿæˆ HTML å†…å®¹ï¼ˆåŒ…å« Chart.js å›¾è¡¨ï¼‰                          â”‚
â”‚     html_content = f'''<!DOCTYPE html>...'''                     â”‚
â”‚                                                                   â”‚
â”‚  4. å†™å…¥æ–‡ä»¶                                                      â”‚
â”‚     with open('index.html', 'w') as f:                           â”‚
â”‚         f.write(html_content)                                    â”‚
â”‚                                                                   â”‚
â”‚  æ–‡ä»¶ç³»ç»Ÿå˜åŒ–:                                                    â”‚
â”‚  index.html  â† æ–°åˆ›å»ºæˆ–æ›´æ–°                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¤æ—¶è™šæ‹Ÿæœºæ–‡ä»¶ç³»ç»ŸçŠ¶æ€:                                          â”‚
â”‚  â”œâ”€â”€ data/                                                       â”‚
â”‚  â”‚   â””â”€â”€ price_history.json  âœ“ å·²æ›´æ–°ï¼ˆåŒ…å«ä»Šå¤©çš„æ•°æ®ï¼‰          â”‚
â”‚  â””â”€â”€ index.html              âœ“ å·²åˆ›å»º/æ›´æ–°ï¼ˆåŒ…å«æœ€æ–°å›¾è¡¨ï¼‰        â”‚
â”‚                                                                   â”‚
â”‚  Git çŠ¶æ€:                                                        â”‚
â”‚  $ git status                                                    â”‚
â”‚  On branch master                                                â”‚
â”‚  Changes not staged for commit:                                 â”‚
â”‚    modified:   data/price_history.json                           â”‚
â”‚                                                                   â”‚
â”‚  Untracked files:                                                â”‚
â”‚    index.html                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: Git é…ç½®                                                 â”‚
â”‚  $ git config --local user.email "github-actions[bot]@..."       â”‚
â”‚  $ git config --local user.name "github-actions[bot]"            â”‚
â”‚                                                                   â”‚
â”‚  é…ç½®æ–‡ä»¶ä½ç½®: .git/config                                        â”‚
â”‚  [user]                                                          â”‚
â”‚      name = github-actions[bot]                                  â”‚
â”‚      email = github-actions[bot]@users.noreply.github.com        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 6: Git Addï¼ˆæ·»åŠ åˆ°æš‚å­˜åŒºï¼‰                                  â”‚
â”‚  $ git add data/price_history.json index.html                    â”‚
â”‚                                                                   â”‚
â”‚  Git å†…éƒ¨æ“ä½œ:                                                    â”‚
â”‚  1. è®¡ç®—æ–‡ä»¶çš„ SHA-1 å“ˆå¸Œå€¼                                       â”‚
â”‚     price_history.json â†’ a1b2c3d4...                             â”‚
â”‚     index.html â†’ e5f6g7h8...                                     â”‚
â”‚                                                                   â”‚
â”‚  2. åˆ›å»º blob å¯¹è±¡å¹¶å­˜å‚¨åˆ° .git/objects/                         â”‚
â”‚     .git/objects/a1/b2c3d4...                                    â”‚
â”‚     .git/objects/e5/f6g7h8...                                    â”‚
â”‚                                                                   â”‚
â”‚  3. æ›´æ–°ç´¢å¼•æ–‡ä»¶ .git/indexï¼ˆæš‚å­˜åŒºï¼‰                            â”‚
â”‚                                                                   â”‚
â”‚  $ git status                                                    â”‚
â”‚  Changes to be committed:                                        â”‚
â”‚    modified:   data/price_history.json                           â”‚
â”‚    new file:   index.html                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 7: Git Commitï¼ˆåˆ›å»ºæäº¤å¯¹è±¡ï¼‰                               â”‚
â”‚  $ git diff --staged --quiet || git commit -m "ğŸ¤– è‡ªåŠ¨æ›´æ–°..."    â”‚
â”‚                                                                   â”‚
â”‚  Git å†…éƒ¨æ“ä½œ:                                                    â”‚
â”‚  1. æ£€æŸ¥æš‚å­˜åŒºæ˜¯å¦æœ‰å˜åŒ–                                          â”‚
â”‚     git diff --staged --quiet  â†’ è¿”å›ç  1ï¼ˆæœ‰å˜åŒ–ï¼‰              â”‚
â”‚                                                                   â”‚
â”‚  2. åˆ›å»º tree å¯¹è±¡ï¼ˆç›®å½•ç»“æ„å¿«ç…§ï¼‰                                â”‚
â”‚     .git/objects/xx/xxxxxx... (tree object)                      â”‚
â”‚                                                                   â”‚
â”‚  3. åˆ›å»º commit å¯¹è±¡                                              â”‚
â”‚     å†…å®¹:                                                         â”‚
â”‚     - tree: [treeå¯¹è±¡SHA]                                        â”‚
â”‚     - parent: [ä¸Šä¸€ä¸ªcommitçš„SHA]                                â”‚
â”‚     - author: github-actions[bot] <...>                          â”‚
â”‚     - committer: github-actions[bot] <...>                       â”‚
â”‚     - message: ğŸ¤– è‡ªåŠ¨æ›´æ–°ä»·æ ¼æ•°æ® 2025-10-24 15:30              â”‚
â”‚                                                                   â”‚
â”‚  4. æ›´æ–°åˆ†æ”¯æŒ‡é’ˆ (.git/refs/heads/master)                        â”‚
â”‚     master â†’ [æ–°commitçš„SHA]                                     â”‚
â”‚                                                                   â”‚
â”‚  æäº¤æˆåŠŸè¾“å‡º:                                                    â”‚
â”‚  [master abc1234] ğŸ¤– è‡ªåŠ¨æ›´æ–°ä»·æ ¼æ•°æ® 2025-10-24 15:30            â”‚
â”‚   2 files changed, 150 insertions(+), 10 deletions(-)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 8: Git Pushï¼ˆæ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼‰                               â”‚
â”‚  $ git push                                                      â”‚
â”‚                                                                   â”‚
â”‚  è¯¦ç»†æµç¨‹:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Git è¯»å–è¿œç¨‹ä»“åº“é…ç½®                                   â”‚   â”‚
â”‚  â”‚    $ git remote -v                                        â”‚   â”‚
â”‚  â”‚    origin https://github.com/ç”¨æˆ·å/ä»“åº“å.git            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                                   â”‚
â”‚               â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2. Git è¯»å–è®¤è¯ä¿¡æ¯                                       â”‚   â”‚
â”‚  â”‚    ä» .git/credentials è¯»å–ï¼ˆç”± checkout é…ç½®ï¼‰           â”‚   â”‚
â”‚  â”‚    https://x-access-token:ghs_xxxxx@github.com            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                                   â”‚
â”‚               â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 3. ä¸ GitHub æœåŠ¡å™¨å»ºç«‹è¿æ¥                               â”‚   â”‚
â”‚  â”‚    TLS/SSL åŠ å¯†è¿æ¥åˆ° github.com:443                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                                   â”‚
â”‚               â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 4. å‘é€è®¤è¯ä»¤ç‰Œ                                           â”‚   â”‚
â”‚  â”‚    Authorization: token ghs_xxxxx...                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                                   â”‚
â”‚               â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 5. GitHub éªŒè¯æƒé™                                        â”‚   â”‚
â”‚  â”‚    - æ£€æŸ¥ GITHUB_TOKEN æ˜¯å¦æœ‰æ•ˆ                           â”‚   â”‚
â”‚  â”‚    - æ£€æŸ¥æ˜¯å¦æœ‰ contents:write æƒé™                       â”‚   â”‚
â”‚  â”‚    - æ£€æŸ¥ä»¤ç‰Œæ˜¯å¦å±äºå½“å‰ä»“åº“                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                                   â”‚
â”‚               â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 6. åå•†æ¨é€å†…å®¹                                           â”‚   â”‚
â”‚  â”‚    Git æ¯”å¯¹æœ¬åœ°å’Œè¿œç¨‹çš„æäº¤å†å²                           â”‚   â”‚
â”‚  â”‚    æœ¬åœ°: abc1234 (æ–°æäº¤)                                 â”‚   â”‚
â”‚  â”‚    è¿œç¨‹: xyz9876 (æ—§æäº¤)                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                                   â”‚
â”‚               â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 7. ä¼ è¾“ Git å¯¹è±¡                                          â”‚   â”‚
â”‚  â”‚    å‘é€æ–°çš„ commitã€treeã€blob å¯¹è±¡åˆ° GitHub              â”‚   â”‚
â”‚  â”‚    ä½¿ç”¨ Git pack åè®®å‹ç¼©ä¼ è¾“                             â”‚   â”‚
â”‚  â”‚                                                            â”‚   â”‚
â”‚  â”‚    Counting objects: 10, done.                            â”‚   â”‚
â”‚  â”‚    Delta compression using up to 2 threads.               â”‚   â”‚
â”‚  â”‚    Compressing objects: 100% (5/5), done.                 â”‚   â”‚
â”‚  â”‚    Writing objects: 100% (10/10), 15.2 KiB, done.         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                                   â”‚
â”‚               â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 8. GitHub æ›´æ–°è¿œç¨‹åˆ†æ”¯                                    â”‚   â”‚
â”‚  â”‚    refs/heads/master: xyz9876 â†’ abc1234                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚               â”‚                                                   â”‚
â”‚               â†“                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 9. æ¨é€æˆåŠŸï¼Œè¿”å›ç»“æœ                                     â”‚   â”‚
â”‚  â”‚    To https://github.com/ç”¨æˆ·å/ä»“åº“å.git                â”‚   â”‚
â”‚  â”‚       xyz9876..abc1234  master -> master                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub è¿œç¨‹ä»“åº“å·²æ›´æ–°ï¼                                          â”‚
â”‚                                                                   â”‚
â”‚  æ–°çš„æäº¤å‡ºç°åœ¨ä»“åº“ä¸­:                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ¤– è‡ªåŠ¨æ›´æ–°ä»·æ ¼æ•°æ® 2025-10-24 15:30                      â”‚   â”‚
â”‚  â”‚ github-actions[bot] committed 2 minutes ago               â”‚   â”‚
â”‚  â”‚                                                            â”‚   â”‚
â”‚  â”‚ ğŸ“ data/price_history.json    +50 -10                     â”‚   â”‚
â”‚  â”‚ ğŸ“„ index.html                 +100 (new file)             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  å…¶ä»–ç”¨æˆ·å¯ä»¥çœ‹åˆ°:                                                â”‚
â”‚  - Commits é¡µé¢æ˜¾ç¤ºæ–°æäº¤                                         â”‚
â”‚  - æ–‡ä»¶æµè§ˆå™¨æ˜¾ç¤ºæ›´æ–°çš„æ–‡ä»¶                                       â”‚
â”‚  - GitHub Pages è‡ªåŠ¨é‡æ–°éƒ¨ç½²ï¼ˆå¦‚æœå¯ç”¨ï¼‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è™šæ‹Ÿæœºé”€æ¯                                                       â”‚
â”‚  - æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶è¢«åˆ é™¤                                             â”‚
â”‚  - GITHUB_TOKEN å¤±æ•ˆ                                              â”‚
â”‚  - å·¥ä½œæµç»“æŸ                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¸¸è§é—®é¢˜å’Œæ³¨æ„äº‹é¡¹

### 1. ä¸ºä»€ä¹ˆ GITHUB_TOKEN æ¨é€ä¸ä¼šè§¦å‘æ–°çš„å·¥ä½œæµï¼Ÿ

**é—®é¢˜ï¼š**
```yaml
on:
  push:
    branches: ['**']
```

ä½¿ç”¨ GITHUB_TOKEN æ¨é€ä»£ç åï¼Œè¿™ä¸ª `push` äº‹ä»¶ä¸ä¼šè¢«è§¦å‘ã€‚

**åŸå› ï¼š**
- GitHub ä¸ºäº†é˜²æ­¢æ— é™å¾ªç¯è€Œè®¾è®¡çš„å®‰å…¨æœºåˆ¶
- å¦‚æœ GITHUB_TOKEN çš„æ¨é€è§¦å‘ `push` äº‹ä»¶ï¼Œå¯èƒ½å¯¼è‡´ï¼š
  ```
  å·¥ä½œæµè¿è¡Œ â†’ æ¨é€ä»£ç  â†’ è§¦å‘æ–°å·¥ä½œæµ â†’ åˆæ¨é€ä»£ç  â†’ æ— é™å¾ªç¯
  ```

**è§£å†³æ–¹æ¡ˆï¼š**
å¦‚æœéœ€è¦è§¦å‘åç»­å·¥ä½œæµï¼Œä½¿ç”¨ Personal Access Token (PAT)ï¼š

```yaml
- name: Checkout
  uses: actions/checkout@v4
  with:
    token: ${{ secrets.MY_PAT }}  # ä½¿ç”¨ PAT è€Œä¸æ˜¯ GITHUB_TOKEN

- name: Push changes
  run: |
    git push  # ä¼šè§¦å‘ push äº‹ä»¶
```

### 2. å¦‚ä½•è°ƒè¯• Git æ¨é€å¤±è´¥ï¼Ÿ

**å¸¸è§é”™è¯¯ï¼š**

```
! [rejected]        master -> master (fetch first)
error: failed to push some refs
```

**åŸå› å’Œè§£å†³ï¼š**

1. **è¿œç¨‹ä»“åº“æœ‰æ–°æäº¤**ï¼š
   ```yaml
   - name: Commit and push data
     run: |
       git pull --rebase  # å…ˆæ‹‰å–è¿œç¨‹æ›´æ–°
       git add ...
       git commit ...
       git push
   ```

2. **æƒé™ä¸è¶³**ï¼š
   ```yaml
   permissions:
     contents: write  # ç¡®ä¿æœ‰å†™æƒé™
   ```

3. **åˆ†æ”¯ä¿æŠ¤è§„åˆ™**ï¼š
   - æ£€æŸ¥ä»“åº“è®¾ç½®ä¸­çš„åˆ†æ”¯ä¿æŠ¤è§„åˆ™
   - ç¡®ä¿ GitHub Actions æœ‰æƒé™æ¨é€åˆ°è¯¥åˆ†æ”¯

### 3. fetch-depth çš„ä½œç”¨

```yaml
- uses: actions/checkout@v4
  with:
    fetch-depth: 0  # è·å–å®Œæ•´å†å²
```

**ä¸åŒå€¼çš„å«ä¹‰ï¼š**
- `fetch-depth: 1`ï¼ˆé»˜è®¤ï¼‰ï¼šåªè·å–æœ€æ–°æäº¤ï¼ˆæµ…å…‹éš†ï¼‰
- `fetch-depth: 0`ï¼šè·å–å®Œæ•´çš„ Git å†å²
- `fetch-depth: 5`ï¼šè·å–æœ€è¿‘ 5 ä¸ªæäº¤

**ä½•æ—¶ä½¿ç”¨å®Œæ•´å†å²ï¼Ÿ**
- âœ… éœ€è¦æ¨é€ä»£ç å›ä»“åº“
- âœ… éœ€è¦åˆ†ææäº¤å†å²
- âœ… éœ€è¦åˆ›å»ºæ ‡ç­¾æˆ–å‘å¸ƒ
- âŒ åªæ˜¯è¿è¡Œæµ‹è¯•æˆ–æ„å»ºï¼ˆä½¿ç”¨é»˜è®¤å³å¯ï¼Œæ›´å¿«ï¼‰

### 4. å¦‚ä½•å¤„ç†åˆå¹¶å†²çªï¼Ÿ

å¦‚æœå¤šä¸ªå·¥ä½œæµåŒæ—¶è¿è¡Œå¯èƒ½å¯¼è‡´å†²çªï¼š

```yaml
- name: Commit and push with retry
  run: |
    for i in {1..3}; do
      git pull --rebase origin master && \
      git add data/price_history.json index.html && \
      git commit -m "ğŸ¤– è‡ªåŠ¨æ›´æ–°ä»·æ ¼æ•°æ® $(date +'%Y-%m-%d %H:%M')" && \
      git push && break || sleep 5
    done
```

### 5. æ–‡ä»¶å¤§å°é™åˆ¶

**GitHub é™åˆ¶ï¼š**
- å•ä¸ªæ–‡ä»¶ä¸èƒ½è¶…è¿‡ 100 MB
- ä»“åº“å»ºè®®ä¸è¶…è¿‡ 1 GB
- å•æ¬¡æ¨é€ä¸è¶…è¿‡ 2 GB

**è§£å†³å¤§æ–‡ä»¶é—®é¢˜ï¼š**
- ä½¿ç”¨ Git LFSï¼ˆLarge File Storageï¼‰
- å®šæœŸæ¸…ç†æ—§æ•°æ®
- å°†å¤§æ–‡ä»¶å­˜å‚¨åœ¨å¤–éƒ¨æœåŠ¡ï¼ˆS3, CDN ç­‰ï¼‰

### 6. å·¥ä½œæµå¹¶å‘æ§åˆ¶

é˜²æ­¢å¤šä¸ªå·¥ä½œæµåŒæ—¶ä¿®æ”¹æ–‡ä»¶ï¼š

```yaml
concurrency:
  group: price-update
  cancel-in-progress: false  # ä¸å–æ¶ˆæ­£åœ¨è¿è¡Œçš„ï¼Œæ’é˜Ÿç­‰å¾…
```

### 7. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

åœ¨ GitHub ç½‘é¡µä¸ŠæŸ¥çœ‹å·¥ä½œæµæ—¥å¿—ï¼š
1. è¿›å…¥ä»“åº“çš„ **Actions** æ ‡ç­¾
2. é€‰æ‹©å…·ä½“çš„å·¥ä½œæµè¿è¡Œ
3. å±•å¼€æ¯ä¸ªæ­¥éª¤æŸ¥çœ‹è¯¦ç»†è¾“å‡º

**å¯ç”¨è°ƒè¯•æ—¥å¿—ï¼š**
åœ¨ä»“åº“è®¾ç½®ä¸­æ·»åŠ  Secretsï¼š
- `ACTIONS_STEP_DEBUG` = `true`
- `ACTIONS_RUNNER_DEBUG` = `true`

---

## å®é™…åº”ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: æ•°æ®æ”¶é›†å’Œå¯è§†åŒ–ï¼ˆå½“å‰é¡¹ç›®ï¼‰

```yaml
name: Price Tracker
on:
  schedule:
    - cron: '*/30 * * * *'

jobs:
  update:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - name: Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'
      - run: pip install requests beautifulsoup4
      - run: python scripts/gold_egg_price.py
      - run: python scripts/generate_html.py
      - run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add data/ index.html
          git diff --staged --quiet || git commit -m "ğŸ“Š Update data"
          git push
```

### ç¤ºä¾‹ 2: è‡ªåŠ¨å‘å¸ƒ

```yaml
name: Auto Release
on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4
      - name: Build
        run: npm run build
      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
          files: dist/*
          token: ${{ secrets.GITHUB_TOKEN }}
```

### ç¤ºä¾‹ 3: è‡ªåŠ¨æ›´æ–°ä¾èµ–

```yaml
name: Update Dependencies
on:
  schedule:
    - cron: '0 0 * * 1'  # æ¯å‘¨ä¸€

jobs:
  update:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write
    steps:
      - uses: actions/checkout@v4
      - run: npm update
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v5
        with:
          commit-message: "chore: update dependencies"
          title: "ğŸ¤– Auto-update dependencies"
          branch: auto-update-deps
```

---

## æ€»ç»“

### æ ¸å¿ƒæœºåˆ¶

1. **éš”ç¦»çš„æ‰§è¡Œç¯å¢ƒ**ï¼šæ¯æ¬¡è¿è¡Œéƒ½åœ¨å…¨æ–°çš„è™šæ‹Ÿæœºä¸­
2. **è‡ªåŠ¨è®¤è¯**ï¼šGITHUB_TOKEN æä¾›å®‰å…¨çš„ä¸´æ—¶è®¿é—®æƒé™
3. **Git é›†æˆ**ï¼šæ— ç¼çš„ä»£ç æ£€å‡ºå’Œæ¨é€æµç¨‹
4. **æƒé™æ§åˆ¶**ï¼šç»†ç²’åº¦çš„æƒé™ç®¡ç†ä¿è¯å®‰å…¨

### å…³é”®è¦ç‚¹

- âœ… ä½¿ç”¨ `actions/checkout@v4` æ£€å‡ºä»£ç 
- âœ… å£°æ˜ `permissions: contents: write` ä»¥è·å–å†™æƒé™
- âœ… ä½¿ç”¨ `fetch-depth: 0` è·å–å®Œæ•´å†å²ï¼ˆå¦‚æœéœ€è¦æ¨é€ï¼‰
- âœ… é…ç½® Git ç”¨æˆ·ä¿¡æ¯åå†æäº¤
- âœ… ä½¿ç”¨æ¡ä»¶æäº¤é¿å…ç©ºæäº¤
- âœ… GITHUB_TOKEN çš„æ¨é€ä¸ä¼šè§¦å‘ push äº‹ä»¶ï¼ˆé˜²æ­¢å¾ªç¯ï¼‰

### å®‰å…¨å»ºè®®

- ğŸ”’ æœ€å°æƒé™åŸåˆ™ï¼šåªæˆäºˆå¿…è¦çš„æƒé™
- ğŸ”’ ä½¿ç”¨ Secrets å­˜å‚¨æ•æ„Ÿä¿¡æ¯
- ğŸ”’ å®¡æŸ¥ç¬¬ä¸‰æ–¹ Actions çš„ä»£ç 
- ğŸ”’ å®šæœŸè½®æ¢ Personal Access Tokens
- ğŸ”’ å¯ç”¨åˆ†æ”¯ä¿æŠ¤è§„åˆ™

---

## å‚è€ƒèµ„æ–™

- [GitHub Actions å®˜æ–¹æ–‡æ¡£](https://docs.github.com/en/actions)
- [Workflow è¯­æ³•å‚è€ƒ](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions)
- [GITHUB_TOKEN æƒé™](https://docs.github.com/en/actions/security-guides/automatic-token-authentication)
- [actions/checkout æ–‡æ¡£](https://github.com/actions/checkout)
- [Git å†…éƒ¨åŸç†](https://git-scm.com/book/en/v2/Git-Internals-Plumbing-and-Porcelain)

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** 1.0
**æœ€åæ›´æ–°ï¼š** 2025-10-24
**é€‚ç”¨äºï¼š** GitHub Actionsï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰
